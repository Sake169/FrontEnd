from core.models import Message

class PromptTemplates:
    @staticmethod
    def get_typed_extraction_prompt(combined_md: str) -> Message:
        return Message(
            role="user",
            content=f"""请从以下金融报备文档中识别并提取结构化数据：

{combined_md}

要求：
1. 首先识别每条记录的类型（从以下类别中选择）：
   - 证券投资报备交易信息
   - 证券投资报备持仓信息
   - 场外基金报备交易信息
   - 场外基金报备持仓信息
   - 未上市股权报备交易信息
   - 未上市股权报备持仓信息

2. 根据不同类型提取到对应字段：
   - 证券投资报备交易信息：证券账号、交易市场、证券代码、证券名称、买卖方向、交易类型、交易数量（股）、交易价格、产品名称、成交日期、备注
   - 证券投资报备持仓信息：证券账号、交易市场、证券代码、证券名称、持仓数量（股）、持仓日期、备注
   - 场外基金报备交易信息：产品代码、产品名称、买卖方向、场外基金投向、交易份额、交易日期、备注
   - 场外基金报备持仓信息：产品代码、产品名称、持仓份额、持仓日期、备注
   - 未上市股权报备交易信息：企业名称、统一社会信用代码、交易方向、认缴金额（万元）、实缴金额（万元）、持股比例（%）、交易日期、备注
   - 未上市股权报备持仓信息：企业名称、统一社会信用代码、交易方向、认缴金额（万元）、实缴金额（万元）、持股比例（%）、持仓日期、备注

3. 输出格式示例：
json

{{

"files": [

{{

"filename": "文件1.md",

"records": [

{{

"record_type": "证券投资报备交易信息",

"data": {{
"证券账号": "1234567890",
"交易市场": "上海证券交易所",
"证券代码": "600000.SH",
"证券名称": "浦发银行",
"买卖方向": "买入",
"交易类型": "股票",
"交易数量（股）": 100,
"交易价格": 10.0,
"产品名称": "浦发银行",
"成交日期": "2023-05-01",
"备注": "无"

}},


}},

{{

"record_type": "场外基金报备持仓信息",

"data": {{
"产品代码":"",
"产品名称":"",
"持仓数量（股）": 100,
"持仓日期": "2023-05-01",
"备注": "无"

}},


}},





}}

],

"statistics": {{

"证券交易记录数": 5,

"场外基金持仓数": 3,

"总金额": 250000.0

}}

}}

请严格按格式输出，不要包含任何解释。"""
        )